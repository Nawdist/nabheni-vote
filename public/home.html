<!DOCTYPE html>
<html>

<head>
    <title>Vote du logo du lycee </title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/style.css">
  
</head>

<body>
    <div class="container" id="confirm">
        <div class="box">
            <p class="confirm-text">Êtes-vous sûre de ce choix?</p>
            <img src="/images/img9.jpg" alt="" id="confirm-img">
            <div class="button-grp">
                <button class="confirm">Confirmer</button>
                <button class="cancel">Annuler</button>
            </div>
        </div>
    </div>

    <header>
        <h2 class="titre">Concour logo lycée Bachir Nabheni Hammem-Lif</h2><br>
        <div class="headerne">
            <h3>Nabhani Events</h3>
        </div>
    </header>

    <section id="presentation">
        <img src="/images/lycee.jpg" alt="image" class="lycee">
        <div class="texte_centrer">
            <img src="/images/logo event.jpeg" class="logone">
            <p class="plus">Nabheni Events organise un concours Logo
                du 25 mars au 25 avril 2022.
                Tous les élèves de notre lycée Bachir Nabhani Hammam - Lif
                peuvent participer avec un ou plusieurs logos.
                Le logo gagant est celui qui aura le plus grand nombre de vote .
                Ce sera le logo officiel de notre établissement.
                L'annonce du gagnant aura lieu le 7 mai 2022
                sur notre page Facebook et notre compte Instagram.<br>
                <span class="span1">* Il n'y aura qu'un seul gagnant !</span></p>
            <div class="milieu">
                <ul>Les Critéres:
                    <li>Les logos en Arabe</li>
                    <li>Nom du Lyée: البشير النبهاني" معرف"</li>
                    <li>Pas Flou</li>
                </ul>
            </div>
            <p class="btn">
                <a id="choisir" href="#vote">Choisir</a>
            </p>
        </div>
    </section>

    <section class="cards" id="services">
        <form method="#" class="vote-form">
            <div class="content">
                <div class="card">
                    <div class="icon">
                        <img src="/images/img1.png">
                    </div>
                    <div class="info">
                        <h3>Trabelsi Emna</h3>
                        <p>2 année sc 1</p><br>
                        <input type="radio" data-auteur="Trabelsi Emna" name="img" value="img1" class="img1">
                    </div>
                </div>
                <div class="card">
                    <div class="icon">
                        <img src="/images/img2.jpg">
                    </div>
                    <div class="info">
                        <h3>Trabelsi Emna</h3>
                        <p>2 année sc 1</p><br>
                        <input type="radio" data-auteur="Trabelsi Emna" name="img" value="img2" class="img2">
                    </div>
                </div>
                <div class="card">
                    <div class="icon">
                        <img src="/images/img3.jpg">
                    </div>
                    <div class="info">
                        <h3>Trabelsi Emna</h3>
                        <p>2 année sc 1</p><br>
                        <input type="radio" data-auteur="Trabelsi Emna" name="img" value="img3" class="img3">
                    </div>
                </div>
            </div>
            <div class="content">
                <div class="card">
                    <div class="icon">
                        <img src="/images/img4.jpg">
                    </div>
                    <div class="info">
                        <h3>Trabelsi Emna</h3>
                        <p>2 année sc 1</p><br>
                        <input type="radio" data-auteur="Trabelsi Emna" name="img" value="img4" class="img4">
                    </div>
                </div>
                <div class="card">
                    <div class="icon">
                        <img src="/images/img5.jpg">
                    </div>
                    <div class="info">
                        <h3>Trabelsi Emna</h3>
                        <p>2 année sc 1</p><br>
                        <input type="radio" data-auteur="Trabelsi Emna" name="img" value="img5" class="img5">
                    </div>
                </div>
                <div class="card">
                    <div class="icon">
                        <img src="/images/img6.png">
                    </div>
                    <div class="info">
                        <h3>Trabelsi Emna</h3>
                        <p>2 année sc 1</p><br>
                        <input type="radio" data-auteur="Trabelsi Emna" name="img" value="img6" class="img6">
                    </div>
                </div>
            </div>
            <div class="content">
                <div class="card">
                    <div class="icon">
                        <img src="/images/img7.png">
                    </div>
                    <div class="info">
                        <h3>Ben amira Hadeel</h3>
                        <p>1 année s1</p><br>
                        <input type="radio" data-auteur="Ben amira Hadeel" name="img" value="img7" class="img7">
                    </div>
                </div>
                <div class="card">
                    <div class="icon">
                        <img src="/images/img8.webp">
                    </div>
                    <div class="info">
                        <h3>Roudayna Ousletti</h3>
                        <p>1 année s1</p><br>
                        <input type="radio" data-auteur="Roudayna Ousletti" name="img" value="img8" class="img8">
                    </div>
                </div>
                <div class="card">
                    <div class="icon">
                        <img src="/images/img9.jpg">
                    </div>
                    <div class="info">
                        <h3>Kamel Chaibi</h3>
                        <p>Bac informatique</p><br>
                        <input type="radio" data-auteur="Kamel Chaibi" name="img" value="img9" class="img9">
                    </div>
                </div>
            </div>
            <div class="content">
                <div class="card">
                    <div class="icon">
                        <img src="/images/img10.webp">
                    </div>
                    <div class="info">
                        <h3>Douda Bochra</h3>
                        <p>1 année s5</p><br>
                        <input type="radio" data-auteur="Bouda Bochra" name="img" value="img10" class="img10">
                    </div>
                </div>
                <div class="card">
                    <div class="icon">
                        <img src="/images/img11.png">
                    </div>
                    <div class="info">
                        <h3>Med Mounir Gharbi</h3>
                        <p>1 année s2</p><br>
                        <input type="radio" data-auteur="Med Mounir Gharbi" name="img" value="img11" class="img11">
                    </div>
                </div>
                <div class="card">
                    <div class="icon">
                        <img src="/images/img12.png">
                    </div>
                    <div class="info">
                        <h3>Mariem Ourighi</h3>
                        <p>1 annnée s1</p><br>
                        <input type="radio" data-auteur="Mariem Ourighi" name="img" value="img12" class="img12">
                    </div>
                </div>
            </div>
        </form>
    </section>

    <section class="logos" id="vote">
            <div class="partie-envoyer">
                <button type="submit" class="button">Envoyer!</button>
            </div>
    </section>

    <footer class="footer">
        <p class="footer-title">Copyright  &copy <span>2021-2022 Nabheni Events. All rights reserved.</span></p>
        <div class="social-icons">
            <a href="https://www.instagram.com/nabheni_events/?utm_medium=copy_link"><i class="fab fa-instagram"></i></a>
            <a href="https://www.facebook.com/nabhenievents"><i class="fab fa-facebook"></i></a>
        </div>
    </footer>

    <script>
        console.clear()
        let body = {}
        document.querySelectorAll(".card").forEach(card =>{
            card.addEventListener("click", e => {
                card.querySelector("input").click()
            })
        })

        document.querySelectorAll('input[name="img"]').forEach(radio =>{
            radio.addEventListener("click", e =>{
                let img = radio.parentElement.parentElement.querySelector(".icon").querySelector("img")
                console.log(img)
                body = {
                    id: img,
                    auteur: radio.dataset.auteur, 
                    img: radio.value
                }
            })
        })

        const send = document.querySelector(".button")
        const confirm = document.querySelector(".confirm")
        const cancel = document.querySelector(".cancel")

        send.addEventListener("click", e =>{
          const container = document.getElementById("confirm")
          container.querySelector("img").src = body.id.src
          container.style.display = "flex"
        })
        
        confirm.addEventListener("click", e => {
            fetch(
                `/submit?auteur=${body.auteur}&img=${body.img}`, 
                {
                    method: "POST"
                })
                .then(res => res.json().then(data => {
                    if(data.error) alert(data.error)                    
                    else window.location.href = data.redirect
            }))
        })
    </script>    
</body>
</html>